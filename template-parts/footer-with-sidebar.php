</div>
<aside id="sidebar" class="column -pad-top-xs -width-1/4 -width-1/1@sm -width-1/1@md -width-1/1@xs -text-sm">
    <div class="nav nav--stacked -pad-top">
        <ul class="nav__list -text-xs">
            <li class="nav__item -text-upper -is-main-page -text-xs"><a class="nav__link" href="/calgary.php">Calgary</a></li>
            <li class="nav__item -text-upper -is-main-page -text-xs"><a class="nav__link" href="/northwest.php">All NorthWest</a></li>
            <li class="nav__item -text-upper -is-main-page -text-xs"><a class="nav__link" href="/north.php">All North</a></li>
            <li class="nav__item -text-upper -is-main-page -text-xs"><a class="nav__link" href="/northeast.php">All NorthEast</a></li>
            <li class="nav__item -text-upper -is-main-page -text-xs"><a class="nav__link" href="/west.php">All West</a></li>
            <li class="nav__item -text-upper -is-main-page -text-xs"><a class="nav__link" href="/central.php">All Central</a></li>
            <li class="nav__item -text-upper -is-main-page -text-xs"><a class="nav__link" href="/east.php">All East</a></li>
            <li class="nav__item -text-upper -is-main-page -text-xs"><a class="nav__link" href="/south.php">All South</a></li>
            <li class="nav__item -text-upper -is-main-page -text-xs"><a class="nav__link" href="/southeast.php">All SouthEast</a></li>

            <li class="nav__item -text-upper -is-main-page -text-xs -is-current"><a class="nav__link" href="/calgary-bedroom.php">Surrounding Towns</a></li>
            <li class="nav__item -text-upper"><a class="nav__link" href="/bearspaw.php">Bearspaw</a>
            </li>
            <li class="nav__item -text-upper"><a class="nav__link" href="/priddis.php">Priddis</a>
            </li>
            <li class="nav__item -text-upper"><a class="nav__link" href="/black-diamond.php">Black Diamond and Turner Valley</a>
            </li>
            <li class="nav__item -text-upper"><a class="nav__link" href="/langdon-realestate.php">Langdon</a>
            </li>
            <li class="nav__item -text-upper"><a class="nav__link" href="/lyalta-muirfield-realestate.php">Lyalta and the Lakes of Muirfield</a>
            </li>
            <li class="nav__item -text-upper"><a class="nav__link" href="/redwood-meadows-bragg-creek.php">Bragg Creek and Redwood Meadows</a>
            </li>
            <li class="nav__item -text-upper"><a class="nav__link" href="/heritage-pointe.php">Heritage Pointe</a>
            </li>
            <li class="nav__item -text-upper"><a class="nav__link" href="/springbank.php">Springbank</a>
            </li>

            <li class="nav__item -text-upper -is-main-page -text-xs"><a class="nav__link" href="/okotoks.php">Okotoks</a></li>
            <li class="nav__item -text-upper -is-main-page -text-xs"><a class="nav__link" href="/chestermere.php">Chestermere</a></li>
            <li class="nav__item -text-upper -is-main-page -text-xs"><a class="nav__link" href="/airdrie.php">Airdrie</a></li>
            <li class="nav__item -text-upper -is-main-page -text-xs"><a class="nav__link" href="/cochrane.php">Cochrane</a></li>
            <li class="nav__item -text-upper -is-main-page -text-xs"><a class="nav__link" href="/northwest.php">NorthWest</a></li>
        </ul>
    </div>
</aside>
</div>
</div>
</div>

<div class="footer-html-wrap">
    <div id="mobile-nearby-properties" class="hidden">
        <a href="javascript:void(0);" class="button button--strong -text-center">Search Near Me</a>
    </div>

    <div class="subscribe-cta">
        <img class="lazyload" data-src="https://www.calgary-real-estate.com/inc/skins/ce/img/bg-newsletter-cta.jpg" src="https://www.calgary-real-estate.com/img/util/35mm_landscape.gif">
        <div class="container">
            <div class="columns">
                <div class="column -width-1/2 -width-1/1@md -width-1/1@sm -width-1/1@xs">
                    <h2 class="-text-upper -mar-bottom-0">SIGN UP FOR LISTINGS UPDATES</h2>
                </div>
                <div class="column -width-1/2 -width-1/1@md -width-1/1@sm -width-1/1@xs">
                    <form action="?newsletter" class="subscribe__form" method="POST">
                        <input type="hidden" name="opt_marketing" value="in">
                        <div class="input -pill">
                            <input placeholder="Your email address..." name="mi0moecs" value="">
                            <button type="submit" class="button button--strong button--pill">Sign Up</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <footer id="foot" class="footer -pad-vertical-lg -text-center@md -text-center@sm -text-center@xs">
        <div class="container -pad-0">
            <div class="columns">
                <div class="column -width-1/4 -width-1/2@md -width-1/1@sm -width-1/1@xs">
                    <div class="footer__col -pad-horizontal">
                        <h3 class="nav__heading -mar-bottom-xxl">
                            <a class="footer__logo -mar-top-xs" href="/">
                                <img src="https://www.calgary-real-estate.com/uploads/logo_footer.92.webp" srcset="/uploads/retina_logo_footer.34.webp 2x" title="Site Logo"> </a>
                        </h3>
                        <div class="footer__office -pad-bottom">
                            <span class="footer__company">The Group<br>at RE/MAX First</span>
                            <p>
                                #115 8820 Blackfoot Trail SE<br>
                                Calgary, AB T2J 3J1 </p>
                            <a class="hide-desktop" href="tel:1-403-255-9555">
                                1-403-255-9555
                            </a> <a href="mailto:clientcare@thegroup.ca">
                                clientcare@thegroup.ca </a>
                        </div>
                    </div>
                </div>
                <div class="column -width-1/4 -width-1/2@md -width-1/1@sm -width-1/1@xs">
                    <div class="nav nav--stacked">
                        <h3 class="nav__heading -text-invert -pad-sm">The Group</h3>
                        <ul class="nav__list">
                            <li class="nav__item">
                                <a class="nav__link -text-invert -pad-sm" href="/agents.php">About Us</a>
                            </li>
                            <li class="nav__item">
                                <a class="nav__link -text-invert -pad-sm" href="/agents.php">Our Agents</a>
                            </li>
                            <li class="nav__item">
                                <a class="nav__link -text-invert -pad-sm" href="/listings.php">Our Listings</a>
                            </li>
                            <li class="nav__item">
                                <a class="nav__link -text-invert -pad-sm" href="/contact.php">Contact Us</a>
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="column -width-1/4 -width-1/2@md -width-1/1@sm -width-1/1@xs">
                    <div class="nav nav--stacked">
                        <h3 class="nav__heading -text-invert -pad-sm">Info &amp; Services</h3>
                        <ul class="nav__list">
                            <li class="nav__item">
                                <a class="nav__link -text-invert -pad-sm" href="https://www.calgary-real-estate.com/sitemap.php">Site
                                    Map</a>
                            </li>
                            <li class="nav__item">
                                <a class="nav__link -text-invert -pad-sm" href="https://www.calgary-real-estate.com/communities.php">Subdivision List</a>
                            </li>
                            <li class="nav__item">
                                <a class="nav__link -text-invert -pad-sm" href="https://www.calgary-real-estate.com/home-evaluation.php">Home Evaluation</a>
                            </li>

                            <li class="nav__item">
                                <a class="nav__link -text-invert -pad-sm" href="https://www.calgary-real-estate.com/idx/">Search Like a
                                    REALTOR®</a>
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="column -width-1/4 -width-1/2@md -width-1/1@sm -width-1/1@xs">
                    <div class="nav">
                        <h3 class="nav__heading -text-invert">Follow Us</h3>
                        <div class="nav__item -pad-horizontal">
                            <a class="social__link social--facebook" href="https://www.facebook.com/thegroupatremaxfirst/" target="_blank" rel="noopener noreferrer">
                                <svg>
                                    <use xlink:href="/inc/skins/ce/img/assets.svg#icon--facebook" />
                                </svg>
                            </a>
                            <!--
<a class="social__link social--twitter" href="https://twitter.com/" target="_blank">
    <svg>
        <use xlink:href="/inc/skins/ce/img/assets.svg#icon--twitter" />
    </svg>
</a>
-->
                            <a class="social__link social--instagram" href="https://www.instagram.com/thegroupatremaxfirst/" target="_blank" rel="noopener noreferrer">
                                <svg>
                                    <use xlink:href="/inc/skins/ce/img/assets.svg#icon--instagram" />
                                </svg>
                            </a>
                            <!--
<a class="social__link social--linkedin" href="https://www.linkedin.com/" target="_blank">
    <svg>
        <use xlink:href="/inc/skins/ce/img/assets.svg#icon--linked-in" />
    </svg>
</a>
-->
                            <a class="social__link social--youtube" href="https://www.youtube.com/channel/UCHjzgj1WCDcy5aNyQn5iXqw" target="_blank" rel="noopener noreferrer">
                                <svg>
                                    <use xlink:href="/inc/skins/ce/img/assets.svg#icon--youtube" />
                                </svg>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="footer__bottom -pad-vertical -clear -text-xs">
                <div class="-left@lg -left@xl -mar-vertical-sm -pad-horizontal-sm">
                    <p>The trademarks REALTOR&reg;, REALTORS&reg; and the REALTOR&reg; logo are controlled by The Canadian Real Estate Association (CREA) and identify real estate professionals who are members of CREA. Used under license. The trademarks MLS&reg;, Multiple Listing Service&reg; and the associated logos are owned by The Canadian Real Estate Association (CREA) and identify the quality of services provided by real estate professionals who are members of CREA. Used under license.</p>
                    &copy; Copyright 2022,
                    <a href="http://www.realestatewebmasters.com/" rel="nofollow" target="_blank">Real Estate Webmasters</a> All Rights Reserved.
                </div>
                <div class="-right@lg -right@xl -mar-bottom footer--links">
                    <a class="-right" href="http://www.realestatewebmasters.com/" target="_blank">
                        <svg role="img" class="logo logo--rew">
                            <title>Real Estate Webmasters Logo</title>
                            <use xlink:href="/inc/skins/ce/img/assets.svg#logo--rew" />
                        </svg>
                    </a>
                    <div class="nav -inline">
                        <a href="/idx/sitemap.html?p=23">Listings Site Map</a> Copyright 2009-2019 Christopher Audette; RE/MAX First; #115 8820 Blackfoot Trail SE • Calgary, AB • T2J 3J1
                        (403) 255-9555. All Rights Reserved. <a href="/privacy-policy.php">Privacy Policy</a> <a href="/sitemap.php">Sitemap</a>

                        <div class=pagination><a href="/backend" rel="nofollow">Agent Login</a> | <a href="http://www.real-estate.ca/blog/dashboard.html" rel="nofollow">Agent Dashboard</a> </div>
                    </div>
                </div>
            </div>
        </div>
    </footer>
</div>
</div>
<script>
var cb = function() {
    var l = null;
    var h = null;

    l = document.createElement('link');
    l.rel = 'stylesheet';
    l.href = '/inc/cache/css/defer.bfbe6757091664a107a11708767f7848.4.0.css';
    h = document.getElementsByTagName('head')[0];
    h.appendChild(l);
};

var raf = requestAnimationFrame || mozRequestAnimationFrame ||
    webkitRequestAnimationFrame || msRequestAnimationFrame;
if (raf) raf(cb);
else window.addEventListener('load', cb);
</script>

<script src="https://www.calgary-real-estate.com//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script>
var BREW = {
    mobile: navigator.userAgent.match(/(iPhone|iPod|iPad|Android|BlackBerry)/) ? true : false,
    events: {
        click: 'click'
    }
};
BREW.Cookie = function(key, value, options) {
    if (arguments.length > 1 && (!/Object/.test(Object.prototype.toString.call(value)) || value === null || value === undefined)) {
        options = $.extend({}, options);
        if (value === null || value === undefined) {
            options.expires = -1;
        }
        if (typeof options.expires === 'number') {
            var days = options.expires,
                t = options.expires = new Date();
            t.setDate(t.getDate() + days);
        }
        value = String(value);
        return (document.cookie = [encodeURIComponent(key), '=', options.raw ? value : encodeURIComponent(value), options.expires ? '; expires=' + options.expires.toUTCString() : '', options.path ? '; path=' + options.path : '', options.domain ? '; domain=' + options.domain : '', options.secure ? '; secure' : ''].join(''));
    }
    options = value || {};
    var decode = options.raw ? function(s) {
        return s;
    } : decodeURIComponent;
    var pairs = document.cookie.split('; ');
    for (var i = 0, pair; pair = pairs[i] && pairs[i].split('='); i++) {
        if (decode(pair[0]) === key) return decode(pair[1] || '');
    }
    return null;
};
BREW.Splitlist = function(el, options) {
    options = $.extend({
        columns: 3
    }, options);
    var $el = $(el),
        items = $el.children(),
        tag = $el.get(0).tagName.toLowerCase(),
        rows = Math.ceil(items.length / options.columns);
    var $list = $el,
        itemsCount = 0,
        itemsAdded = 0;
    for (var i = 1; i <= options.columns; i++) {
        var $new = $(document.createElement(tag));
        for (var j = itemsCount; j < itemsCount + rows; j++) {
            $new.append(items[j]);
            itemsAdded++;
        }
        itemsCount = itemsAdded;
        rows = Math.ceil((items.length - itemsAdded) / (options.columns - i));
        $new.attr('class', $list.attr('class'));
        $list.after($new);
        $list = $new;
    }
    $el.remove();
};
$.fn.Splitlist = function(options) {
    return this.each(function() {
        (new BREW.Splitlist(this, options));
    });
};
BREW.Resize = function(el, options) {
    var self = this,
        $el = $(el);
    var $canvas = $el.parent();
    if ($canvas.is('picture')) $canvas = $canvas.parent();
    options = $.extend({
        method: 'scale',
        ratio: '3:4',
        className: 'brewImage',
        bgColor: 'transparent'
    }, options);
    var opts = $el.data('resize') || $canvas.data('resize');
    if (opts) $.extend(options, opts);
    var ratio = options.ratio.split(':'),
        shimHPercent = (ratio[0] / ratio[1]) * 100;
    var $shim = $('<div class="shim"/>');
    $shim.css({
        'padding-bottom': shimHPercent + '%'
    }).insertAfter($el);
    $canvas.addClass(options.className).css({
        'background': options.bgColor
    });
    self.pixelsToPercent = function(chi, par) {
        return ((parseInt(chi, 10) / parseInt(par, 10)) * 100) + '%';
    };
    self.resize = function() {
        var resizeMe = function() {
            $el.css({
                'position': 'absolute',
                'max-width': '9999em',
                'height': 'auto',
                'width': 'auto'
            });
            var imgHeight = $el.height(),
                imgWidth = $el.width(),
                imgHPercent = (imgHeight / imgWidth) * 100;
            if (imgHeight <= 0) {
                throw {
                    message: 'Height Error'
                };
            }
            $el.attr('style', '');
            var landscape = (shimHPercent >= imgHPercent);
            $el.removeClass(landscape ? 'portrait' : 'landscape').addClass(landscape ? 'landscape' : 'portrait').addClass(options.method);
            var canvasHeight = $canvas.height(),
                canvasWidth = $canvas.width();
            var imageLeft = null,
                imageTop = null;
            if (options.method === 'crop') {
                if (landscape) {
                    imageLeft = (canvasWidth - $el.width()) / 2;
                    $el.css({
                        'left': self.pixelsToPercent(imageLeft, canvasWidth),
                        'top': 0
                    });
                } else {
                    imageTop = ($el.height() - canvasHeight) / 2;
                    $el.css({
                        'top': self.pixelsToPercent(imageTop * -1, canvasHeight),
                        'left': 0
                    });
                }
            } else if (options.method === 'scale') {
                if (landscape) {
                    imageTop = ($el.height() - canvasHeight) / 2;
                    $el.css({
                        'top': self.pixelsToPercent(imageTop * -1, canvasHeight),
                        'left': 0
                    });
                } else {
                    imageLeft = (canvasWidth - $el.width()) / 2;
                    $el.css({
                        'left': self.pixelsToPercent(imageLeft, canvasWidth),
                        'top': 0
                    });
                }
            }
        };
        try {
            $el.on('load', function() {
                resizeMe();
            }).trigger('load');
        } catch (e) {
            setTimeout(function() {
                try {
                    resizeMe();
                } catch (e) {}
            }, 1000);
        }
    };
    if (el.nodeType === 1 && el.tagName.toLowerCase() === 'img' && el.src !== '') {
        $el.addClass('hidden');
        self.resize($el);
        $el.removeClass('hidden');
    }
};
$.fn.Resize = function(options) {
    var ns = 'BREW.Resize';
    var methods = {
        resize: function() {
            $(this).data(ns).resize;
        }
    };
    if (methods[options]) {
        return methods[options].apply(this, Array.prototype.slice.call(arguments, 1));
    } else if (typeof options === 'object' || !options) {
        return this.each(function() {
            var $this = $(this);
            if (undefined == $this.data(ns)) {
                var plugin = new BREW.Resize(this, options);
                $this.data(ns, plugin);
            }
        });
    }
};
BREW.Images = function(el, options) {
    var $el = $(el);
    options = $.extend({
        resize: {
            method: 'scale'
        },
        onComplete: null,
        onLoad: function(el) {
            var opts = this,
                $img = $(el);
            $img.Resize(opts.resize);
        }
    }, options);
    if ($el.is('img')) $el = $el.parent();
    var $imgs = $el.find('img[data-src]'),
        imgs = [];
    $imgs.each(function() {
        imgs.push(this);
    });
    var total = imgs.length,
        loaded = 0;
    if (total === 0 && options.onComplete) options.onComplete($imgs);
    $.each(imgs, function(i, img) {
        var $img = $(img);
        var src = $img.attr('data-src');
        if ($img.attr('src') === src) {
            if (options.onLoad) options.onLoad(img);
            if (total === ++loaded && options.onComplete) options.onComplete($imgs);
            return true;
        }
        var $canvas = $img.parent().addClass('stateLoading'),
            image = new Image();
        $(image).bind('load.images error.images', function(e) {
            $canvas.removeClass('stateLoading');
            img.src = image.src;
            if (!$img.hasClass('loaded')) {
                $img.addClass('loaded');
                if (e.type === 'load' && options.onLoad) options.onLoad(img);
            }
            if (total === ++loaded && options.onComplete) options.onComplete($imgs);
        });
        $img.attr('data-org', img.src);
        image.src = $img.attr('data-src');
    });
};
$.fn.Images = function(options) {
    return this.each(function() {
        (new BREW.Images(this, options));
    });
};
BREW.Menu = function(el, options) {
    var self = this,
        $el = $(el);
    options = $.extend({
        onOpen: null,
        onClose: null,
        onClick: null
    }, options);
    var $btn = $el.find('>.btn'),
        $menu = $el.find('.menu');
    self.init = function() {
        self.bindEvents();
    };
    self.open = function() {
        $menu.removeClass('hidden');
        if (options.onOpen) options.onOpen(this);
    };
    self.close = function() {
        $menu.addClass('hidden');
        if (options.onClose) options.onClose(this);
    };
    self.toggle = function(e) {
        e.preventDefault();
        if ($menu.hasClass('hidden')) {
            self.open();
        } else {
            self.close();
        }
    };
    self.bindEvents = function() {
        $(document).bind(BREW.events.click + '.menu', function(e) {
            var $t = $(e.target).closest('.trigger');
            if ($t.get(0) != el) {
                self.close();
            }
        });
        $btn.on(BREW.events.click + '.menu', self.toggle);
        $menu.on('li', BREW.events.click + '.menu', function(e) {
            if (options.onClick) options.onClick(this);
            e.preventDefault();
        });
    };
    self.init();
};
$.fn.Menu = function(options) {
    var ns = 'BREW.Menu';
    var methods = {
        open: function() {
            $(this).data(ns).open();
        },
        close: function() {
            $(this).data(ns).close();
        }
    };
    if (methods[options]) {
        return methods[options].apply(this, Array.prototype.slice.call(arguments, 1));
    } else if (typeof options === 'object' || !options) {
        return this.each(function() {
            var $this = $(this);
            if (undefined == $this.data(ns)) {
                var plugin = new BREW.Menu(this, options);
                $this.data(ns, plugin);
            }
        });
    }
};
BREW.Autocomplete = function(el, options) {
    var self = this,
        $input = $(el).attr('autocomplete', 'off').wrap('<div class="ac-input"></div>'),
        $wrap = $input.closest('.ac-input'),
        opts = $input.data('autocomplete');
    options = this.opts = $.extend({
        url: '/idx/inc/php/ajax/json.php',
        limit: 10,
        multiple: false,
        params: {},
        onItemSelect: null
    }, options, opts || {});
    self.init = function() {
        $input.on('focus.ac-input', self.onfocus).on('keypress.ac-input', self.keypress).on('keyup.ac-input', self.keyup);
        $wrap.on(BREW.events.click + '.ac-input', '.menu label', self.click).on('mouseenter.ac-input', '.menu label', self.hover);
        if ($.browser.webkit || $.browser.msie) {
            $input.on('keydown.ac-input', self.keypress);
        }
    };
    self.clear = function() {
        $input.data('ac-query', null);
    };
    self.hover = function() {
        self.setActive($(this));
    };
    self.click = function() {
        self.setActive($(this), true);
    };
    self.onfocus = function() {
        var val = this.value;
        if (options.multiple) {
            val = val.split(/,\s*/).pop();
        }
        if (val.length > 0) {
            self.open();
        }
    };
    self.select = function() {
        var $labels = $input.closest('.ac-input').find('.menu label'),
            $active = $labels.filter('.active'),
            $label = $active.length ? $active : $labels.first();
        if ($label.length) {
            var value = $label.attr('data-ac-value');
            if (typeof options.onItemSelect == 'function') {
                value = options.onItemSelect.call(this, $label.get(0), value);
            }
            if (options.multiple) {
                var terms = $input.val().split(/,\s*/);
                terms.pop();
                if (value !== false) {
                    terms.push(value);
                    terms.push('');
                }
                $input.val(terms.join(', ')).trigger('focus.ac-input');
            } else if (value !== false) {
                $input.val(value);
            } else {
                $input.val('');
            }
            self.close();
            self.clear();
        }
    };
    self.isActive = function() {
        var $menu = $input.closest('.ac-input').find('.menu');
        if ($menu.length) {
            if ($menu.hasClass('hidden')) {
                return false;
            } else {
                return true;
            }
        }
        return false;
    };
    self.setActive = function($label, select) {
        $label.addClass('active').siblings('label').removeClass('active');
        if (select) self.select();
    };
    self.next = function() {
        var $labels = $input.closest('.ac-input').find('.menu label'),
            $active = $labels.filter('.active').next('label');
        var $label = $active.length ? $active : $labels.first();
        self.setActive($label);
    };
    self.prev = function() {
        var $labels = $input.closest('.ac-input').find('.menu label'),
            $active = $labels.filter('.active').prev('label'),
            $label = $active.length ? $active : $labels.last();
        self.setActive($label);
    };
    self.open = function() {
        $input.siblings('.menu').removeClass('hidden');
        $(document).on(BREW.events.click + '.ac-input', function(e) {
            var $t = $(e.target).closest('.ac-input');
            if ($t.length == 1) return;
            $(document).off(BREW.events.click + '.ac-input');
            self.close();
        });
    };
    self.close = function() {
        $input.closest('.ac-input').find('.menu').addClass('hidden');
    };
    self.keypress = function(e) {
        switch (e.keyCode) {
            case 9:
            case 13:
            case 27:
                if (self.isActive()) {
                    e.preventDefault();
                }
                break;
            case 38:
                e.preventDefault();
                self.prev();
                break;
            case 40:
                e.preventDefault();
                self.next();
                break;
            default:
                self.query(this.value);
        }
        e.stopPropagation();
    };
    self.keyup = function(e) {
        switch (e.keyCode) {
            case 38:
            case 40:
                break;
            case 27:
                self.close();
                break;
            case 9:
            case 13:
                if (self.isActive()) {
                    self.select();
                }
                break;
            default:
                self.query(this.value);
        }
        e.stopPropagation();
        e.preventDefault();
    };
    self.highlight = function(query, item) {
        query = query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g, '\\$&');
        return item.replace(new RegExp('(^' + query + ')', 'ig'), function($1, match) {
            return '<em>' + match + '</em>';
        });
    };
    self.query = function(query) {
        if (options.multiple) {
            query = query.split(/,\s*/).pop();
        }
        var params = typeof(options.params) == 'function' ? options.params.call() : options.params,
            data = $.extend(params, {
                q: query
            });
        if (data.q.length < 1) return;
        var this_query = JSON.stringify(data),
            last_query = $input.data('ac-query');
        if (this_query === last_query) return;
        $input.data('ac-query', this_query);
        var search = $input.data('ac-search');
        if (search) clearTimeout(search);
        $input.addClass('loading').data('ac-search', setTimeout(function() {
            var ajax = $input.data('ac-ajax');
            if (ajax) ajax.abort();
            $input.data('ac-ajax', $.ajax({
                'url': options.url,
                'type': 'get',
                'data': $.extend({}, data, {
                    limit: options.limit,
                    search: $input.attr('name')
                }),
                'dataType': 'json',
                'success': function(data) {
                    if (typeof(data.options) == 'undefined') return;
                    $wrap.find('.menu').remove();
                    if (data.options.length > 0) {
                        var menu = '<div class="menu toggleset">';
                        $.each(data.options, function() {
                            menu += '<label data-ac-value="' + this.value + '">' + self.highlight(query, this.title) + '</label>';
                        });
                        menu += '</div>';
                        $wrap.append(menu);
                        $input.removeClass('loading').trigger('focus.ac-input');
                    }
                }
            }));
        }, 250));
    };
    self.init();
};
$.fn.Autocomplete = function(options) {
    var ns = 'BREW.Autocomplete';
    var methods = {
        setOption: function(option, value) {
            var options = $(this).data(ns).opts;
            options[option] = value;
        },
        refresh: function() {
            var $this = $(this),
                val = $this.val(),
                inst = $this.data(ns);
            inst.clear();
            inst.query(val);
        }
    };
    if (methods[options]) {
        return methods[options].apply(this, Array.prototype.slice.call(arguments, 1));
    } else if (typeof options === 'object' || !options) {
        return this.each(function() {
            var $this = $(this);
            if (undefined == $this.data(ns)) {
                var plugin = new BREW.Autocomplete(this, options);
                $this.data(ns, plugin);
            }
        });
    }
};
BREW.Truncate = function(el, options) {
    options = $.extend({
        count: 600,
        ending: '...',
        moreText: 'more &raquo;',
        lessText: '&laquo; less '
    }, options);
    var $el = $(el),
        fullText = $el.html(),
        truncText = $el.html().substring(0, options.count).split(' ').slice(0, -1).join(' ') + options.ending;
    if (fullText.length < options.count) {
        return;
    }
    $el.html(truncText + ' <a href="#" class="more">' + options.moreText + '</a>');
    $el.find('a.more').live('click', function() {
        $el.html(fullText + ' <a href="#" class="less">' + options.lessText + '</a>').show();
        return false;
    });
    $el.find('a.less').live('click', function() {
        $el.html(truncText + ' <a href="#" class="more"">' + options.moreText + '</a>').show();
        return false;
    });
};
$.fn.Truncate = function(options) {
    return this.each(function() {
        (new BREW.Truncate(this, options));
    });
};

var IDX = {};
(function($) {
    IDX.Favorite = function(options, el) {
        var $listing = $(el);
        options = $.extend({
            mls: null,
            feed: null,
            force: null,
            onComplete: $.noop,
            onFailure: function(error) {
                alert(error);
            }
        }, options);
        var saved = !!$listing.hasClass('saved');
        if (options.force) {
            $listing.addClass('saved');
        } else {
            $listing.toggleClass('saved');
        }
        $.ajax({
            'url': '/idx/inc/php/ajax/bookmark.php',
            'type': 'POST',
            'dataType': 'json',
            'data': {
                'force': options.force ? options.force : '',
                'feed': options.feed ? options.feed : '',
                'mls_number': options.mls ? options.mls : ''
            },
            'success': function(json) {
                if (json.register) {
                    $.Window({
                        iframe: json.register
                    });
                } else if (json.added) {
                    $listing.addClass('saved');
                } else if (json.removed) {
                    $listing.removeClass('saved');
                } else if (json.error) {
                    $listing.toggleClass('saved', saved);
                    options.onFailure.apply(this, [json.error]);
                }
                if (options.onComplete) {
                    options.onComplete(json);
                }
            }
        });
    };
    $.fn.Favorite = function(options) {
        return this.each(function() {
            (new IDX.Favorite(options, this));
        });
    };
    IDX.Dismiss = function(options, el) {
        var $listing = $(el);
        options = $.extend({
            mls: null,
            feed: null,
            force: null,
            onComplete: $.noop,
            onFailure: function(error) {
                alert(error);
            }
        }, options);
        var dismissed = !!$listing.hasClass('dismissed');
        if (options.force) {
            $listing.addClass('dismissed');
        } else {
            $listing.toggleClass('dismissed');
        }
        $.ajax({
            'url': '/idx/inc/php/ajax/dismiss.php',
            'type': 'POST',
            'dataType': 'json',
            'data': {
                'force': options.force ? options.force : '',
                'feed': options.feed ? options.feed : '',
                'mls_number': options.mls ? options.mls : ''
            },
            'success': function(json) {
                if (json.register) {
                    $.Window({
                        iframe: json.register
                    });
                } else if (json.added) {
                    $listing.addClass('dismissed');
                } else if (json.removed) {
                    $listing.removeClass('dismissed');
                } else if (json.error) {
                    $listing.toggleClass('dismissed', dismissed);
                    options.onFailure.apply(this, [json.error]);
                }
                if (options.onComplete) {
                    options.onComplete(json);
                }
            }
        });
    };
    $.fn.Dismiss = function(options) {
        return this.each(function() {
            (new IDX.Dismiss(options, this));
        });
    };
    IDX.Paginate = function(options) {
        var opts = $.extend({
            mls: null,
            feed: null,
            done: $.noop,
            fail: $.noop
        }, options);
        return $.ajax({
            'url': '/idx/inc/php/ajax/json.php?paginateListing',
            'type': 'POST',
            'dataType': 'json',
            'data': {
                'feed': opts.feed,
                'mls_number': opts.mls
            }
        }).done(opts.done).fail(opts.fail);
    };
})(jQuery);

(function() {
    'use strict';
    var connectUrl = '/idx/connect.html',
        registerUrl = '/idx/register.html';
    $(window).on('oauth-login', function(e, popup) {
        if (popup) {
            popup.close();
        }
        if (window != window.parent) {
            window.parent.location.reload();
        } else {
            window.location.reload();
        }
    });
    $(window).on('oauth-success', function(e, popup) {
        if (popup) {
            popup.close();
        }
        if (window != window.parent) {
            window.location.href = connectUrl + '?popup';
        } else {
            $.Window({
                iframe: connectUrl
            });
        }
    });
    $(window).on('oauth-error', function(e, popup) {
        if (popup) {
            popup.close();
        }
        if (window != window.parent) {
            window.location.reload();
        } else {
            $.Window({
                iframe: registerUrl
            });
        }
    });
})();

const forms = document.querySelectorAll('form');
if (forms) {
    for (let i = 0; i < forms.length; i++) {
        let form = forms[i];
        let formSubmitTimestamp = form.querySelector('input[name="form-nonce"]');
        if (formSubmitTimestamp) {
            form.addEventListener('submit', function() {
                const nonce = new Date().getTime();
                formSubmitTimestamp.value = nonce;
                BREW.Cookie('form-nonce', nonce);
            });
        }
    }
}

Number.prototype.format = function(c, d, t) {
    c = isNaN(c = Math.abs(c)) ? 0 : c;
    d = d == undefined ? '.' : d;
    t = t == undefined ? ',' : t;
    var n = this,
        s = n < 0 ? '-' : '',
        i = parseInt(n = Math.abs(+n || 0).toFixed(c)) + '',
        j = (j = i.length) > 3 ? j % 3 : 0;
    return s + (j ? i.substr(0, j) + t : '') + i.substr(j).replace(/(\d{3})(?=\d)/g, '$1' + t) + (c ? d + Math.abs(n - i).toFixed(c).slice(2) : '');
};
if (!String.prototype.trim) {
    (function() {
        var rtrim = /^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;
        String.prototype.trim = function() {
            return this.replace(rtrim, '');
        };
    })();
}
var openPage = function(url) {
    $.Window({
        iframe: url
    });
};

var saveSearch = function(search) {
    search = $.extend(search, {
        search_title: search.search_title ? search.search_title : (search.save_prompt ? search.save_prompt : '')
    });
    var content = '<form>' + '<div class="notice"><div class="notice__message">Save this search to receive updates of new listings.</div></div>' + '<div class="field">' + '<label class="field__label">Search Title</label>' + '<input class="-width-1/1" name="search_title" value="' + (search.search_title.length > 0 ? search.search_title : 'My Saved Search') + '" required>' + '</div>' + '<div class="field">' + '<label class="field__label">Email Frequency</label>' + '<select class="-width-1/1" name="frequency">' + '<option value="never"' + (search.frequency == 'never' ? ' selected' : '') + '>Never</option>' + '<option value="immediately"' + (search.frequency == 'immediately' ? ' selected' : '') + '>Immediately</option>' + '<option value="daily"' + (search.frequency == 'daily' ? ' selected' : '') + '>Daily</option>' + '<option value="weekly"' + (!search.frequency || search.frequency == 'weekly' ? ' selected' : '') + '>Weekly</option>' + '<option value="monthly"' + (search.frequency == 'monthly' ? ' selected' : '') + '>Monthly</option>' + '</select>' + '</div>' + '<div class="field">' + '<input type="checkbox" name="email_results_immediately" value="true"> Email Results Immediately' + '</div>' + '<div class="buttons -pad-top">' + '<button type="submit" class="button button--strong button--pill">Save Search</button>' + '</div>' + '</form>';
    $.Window({
        open: true,
        width: 400,
        title: 'Save this Search',
        content: content,
        onOpen: function(win) {
            var criteria = search,
                $el = win.getWindow(),
                $msg = $el.find('.notice'),
                $form = $el.find('form').on('submit', function() {
                    $msg.removeClass('notice--positive notice--negative').addClass('notice--note').html('Processing Request...');
                    var email_results_immediately = $form.find('input[name="email_results_immediately"]').is(':checked') ? 'true' : 'false';
                    var search = $.extend(criteria, {
                        search_title: $form.find('input[name="search_title"]').val(),
                        frequency: $form.find('select[name="frequency"]').val(),
                        email_results_immediately: email_results_immediately,
                        save_search: true
                    });
                    $.ajax({
                        url: '/idx/inc/php/ajax/json.php?saveSearch',
                        type: 'POST',
                        data: search,
                        dataType: 'json',
                        success: function(json) {
                            if (typeof(json) == 'undefined' || !json) return;
                            if (json.success) {
                                $msg.html(json.success + '<br />').addClass('notice--positive').removeClass('notice--note');
                                if (search.create_search && search.lead_id) {
                                    window.location = '/backend/leads/lead/searches/?id=' + search.lead_id;
                                } else if (json.search) {
                                    if (search.search_by === 'map') {
                                        window.location = '/idx/map/?saved_search_id=' + json.search;
                                    } else {
                                        window.location = '/idx/search/' + json.search + '/';
                                    }
                                }
                            } else {
                                if (json.error) {
                                    $msg.html(json.error).addClass('notice--negative').removeClass('notice--note');
                                }
                                if (json.redirect) {
                                    $.Window({
                                        iframe: json.redirect
                                    });
                                }
                            }
                        }
                    });
                    return false;
                });
            if (search.trigger) $form.trigger('submit');
        }
    });
};

var editSearch = function(search) {
    var data = $.extend({}, search, {
        edit_search: null
    });
    $.ajax({
        'url': '/idx/inc/php/ajax/json.php?editSearch',
        'type': 'POST',
        'dataType': 'json',
        'data': data,
        'success': function(json) {
            if (typeof(json) == 'undefined' || !json) return;
            if (json.success) {
                if (search.edit_search && search.lead_id) {
                    window.location = '/backend/leads/lead/searches/?id=' + search.lead_id;
                } else if (search.saved_search_id && search.search_by == 'map') {
                    window.location = '/idx/map/?saved_search_id=' + search.saved_search_id;
                } else if (search.saved_search_id) {
                    window.location = '/idx/search/' + search.saved_search_id + '/';
                }
            } else if (json.error) {
                alert(json.error);
            }
        }
    });
    return;
};

(function() {
    'use strict';
    ! function(e, n, t) {
        function r(e, n) {
            return typeof e === n;
        }

        function o() {
            var e, n, t, o, i, s, a;
            for (var l in C)
                if (C.hasOwnProperty(l)) {
                    if (e = [], n = C[l], n.name && (e.push(n.name.toLowerCase()), n.options && n.options.aliases && n.options.aliases.length))
                        for (t = 0; t < n.options.aliases.length; t++) e.push(n.options.aliases[t].toLowerCase());
                    for (o = r(n.fn, 'function') ? n.fn() : n.fn, i = 0; i < e.length; i++) s = e[i], a = s.split('.'), 1 === a.length ? Modernizr[a[0]] = o : (!Modernizr[a[0]] || Modernizr[a[0]] instanceof Boolean || (Modernizr[a[0]] = new Boolean(Modernizr[a[0]])), Modernizr[a[0]][a[1]] = o), h.push((o ? '' : 'no-') + a.join('-'));
                }
        }

        function i(e) {
            var n = x.className,
                t = Modernizr._config.classPrefix || '';
            if (S && (n = n.baseVal), Modernizr._config.enableJSClass) {
                var r = new RegExp('(^|\\s)' + t + 'no-js(\\s|$)');
                n = n.replace(r, '$1' + t + 'js$2');
            }
            Modernizr._config.enableClasses && (n += ' ' + t + e.join(' ' + t), S ? x.className.baseVal = n : x.className = n);
        }

        function s() {
            return 'function' != typeof n.createElement ? n.createElement(arguments[0]) : S ? n.createElementNS.call(n, 'http://www.w3.org/2000/svg', arguments[0]) : n.createElement.apply(n, arguments);
        }

        function a(e) {
            return e.replace(/([a-z])-([a-z])/g, function(e, n, t) {
                return n + t.toUpperCase();
            }).replace(/^-/, '');
        }

        function l(e, n) {
            return !!~('' + e).indexOf(n);
        }

        function f(e, n) {
            return function() {
                return e.apply(n, arguments);
            };
        }

        function u(e, n, t) {
            var o;
            for (var i in e)
                if (e[i] in n) return t === !1 ? e[i] : (o = n[e[i]], r(o, 'function') ? f(o, t || n) : o);
            return !1;
        }

        function c(n, t, r) {
            var o;
            if ('getComputedStyle' in e) {
                o = getComputedStyle.call(e, n, t);
                var i = e.console;
                if (null !== o) r && (o = o.getPropertyValue(r));
                else if (i) {
                    var s = i.error ? 'error' : 'log';
                    i[s].call(i, 'getComputedStyle returning null, its possible modernizr test results are inaccurate');
                }
            } else o = !t && n.currentStyle && n.currentStyle[r];
            return o;
        }

        function p(e) {
            return e.replace(/([A-Z])/g, function(e, n) {
                return '-' + n.toLowerCase();
            }).replace(/^ms-/, '-ms-');
        }

        function d() {
            var e = n.body;
            return e || (e = s(S ? 'svg' : 'body'), e.fake = !0), e;
        }

        function m(e, t, r, o) {
            var i, a, l, f, u = 'modernizr',
                c = s('div'),
                p = d();
            if (parseInt(r, 10))
                for (; r--;) l = s('div'), l.id = o ? o[r] : u + (r + 1), c.appendChild(l);
            return i = s('style'), i.type = 'text/css', i.id = 's' + u, (p.fake ? p : c).appendChild(i), p.appendChild(c), i.styleSheet ? i.styleSheet.cssText = e : i.appendChild(n.createTextNode(e)), c.id = u, p.fake && (p.style.background = '', p.style.overflow = 'hidden', f = x.style.overflow, x.style.overflow = 'hidden', x.appendChild(p)), a = t(c, e), p.fake ? (p.parentNode.removeChild(p), x.style.overflow = f, x.offsetHeight) : c.parentNode.removeChild(c), !!a;
        }

        function v(n, r) {
            var o = n.length;
            if ('CSS' in e && 'supports' in e.CSS) {
                for (; o--;)
                    if (e.CSS.supports(p(n[o]), r)) return !0;
                return !1;
            }
            if ('CSSSupportsRule' in e) {
                for (var i = []; o--;) i.push('(' + p(n[o]) + ':' + r + ')');
                return i = i.join(' or '), m('@supports (' + i + ') { #modernizr { position: absolute; } }', function(e) {
                    return 'absolute' == c(e, null, 'position');
                });
            }
            return t;
        }

        function y(e, n, o, i) {
            function f() {
                c && (delete T.style, delete T.modElem);
            }
            if (i = r(i, 'undefined') ? !1 : i, !r(o, 'undefined')) {
                var u = v(e, o);
                if (!r(u, 'undefined')) return u;
            }
            for (var c, p, d, m, y, g = ['modernizr', 'tspan', 'samp']; !T.style && g.length;) c = !0, T.modElem = s(g.shift()), T.style = T.modElem.style;
            for (d = e.length, p = 0; d > p; p++)
                if (m = e[p], y = T.style[m], l(m, '-') && (m = a(m)), T.style[m] !== t) {
                    if (i || r(o, 'undefined')) return f(), 'pfx' == n ? m : !0;
                    try {
                        T.style[m] = o;
                    } catch (h) {}
                    if (T.style[m] != y) return f(), 'pfx' == n ? m : !0;
                } return f(), !1;
        }

        function g(e, n, t, o, i) {
            var s = e.charAt(0).toUpperCase() + e.slice(1),
                a = (e + ' ' + j.join(s + ' ') + s).split(' ');
            return r(n, 'string') || r(n, 'undefined') ? y(a, n, o, i) : (a = (e + ' ' + E.join(s + ' ') + s).split(' '), u(a, n, t));
        }
        var h = [],
            C = [],
            _ = {
                _version: '3.5.0',
                _config: {
                    classPrefix: '',
                    enableClasses: !0,
                    enableJSClass: !0,
                    usePrefixes: !0
                },
                _q: [],
                on: function(e, n) {
                    var t = this;
                    setTimeout(function() {
                        n(t[e]);
                    }, 0);
                },
                addTest: function(e, n, t) {
                    C.push({
                        name: e,
                        fn: n,
                        options: t
                    });
                },
                addAsyncTest: function(e) {
                    C.push({
                        name: null,
                        fn: e
                    });
                }
            },
            Modernizr = function() {};
        Modernizr.prototype = _, Modernizr = new Modernizr;
        var x = n.documentElement,
            S = 'svg' === x.nodeName.toLowerCase(),
            w = _._config.usePrefixes ? ' -webkit- -moz- -o- -ms- '.split(' ') : ['', ''];
        _._prefixes = w, Modernizr.addTest('csspositionsticky', function() {
            var e = 'position:',
                n = 'sticky',
                t = s('a'),
                r = t.style;
            return r.cssText = e + w.join(n + ';' + e).slice(0, -e.length), -1 !== r.position.indexOf(n);
        });
        var b = 'Moz O ms Webkit',
            j = _._config.usePrefixes ? b.split(' ') : [];
        _._cssomPrefixes = j;
        var z = function(n) {
            var r, o = w.length,
                i = e.CSSRule;
            if ('undefined' == typeof i) return t;
            if (!n) return !1;
            if (n = n.replace(/^@/, ''), r = n.replace(/-/g, '_').toUpperCase() + '_RULE', r in i) return '@' + n;
            for (var s = 0; o > s; s++) {
                var a = w[s],
                    l = a.toUpperCase() + '_' + r;
                if (l in i) return '@-' + a.toLowerCase() + '-' + n;
            }
            return !1;
        };
        _.atRule = z;
        var E = _._config.usePrefixes ? b.toLowerCase().split(' ') : [];
        _._domPrefixes = E;
        var P = {
            elem: s('modernizr')
        };
        Modernizr._q.push(function() {
            delete P.elem;
        });
        var T = {
            style: P.elem.style
        };
        Modernizr._q.unshift(function() {
            delete T.style;
        }), _.testAllProps = g;
        var k = _.prefixed = function(e, n, t) {
            return 0 === e.indexOf('@') ? z(e) : (-1 != e.indexOf('-') && (e = a(e)), n ? g(e, n, t) : g(e, 'pfx'));
        };
        Modernizr.addTest('objectfit', !!k('objectFit'), {
            aliases: ['object-fit']
        }), o(), i(h), delete _.addTest, delete _.addAsyncTest;
        for (var N = 0; N < Modernizr._q.length; N++) Modernizr._q[N]();
        e.Modernizr = Modernizr;
    }(window, document);
    if (!Modernizr.objectfit) {
        $('.thumb, .photoGrid2A, .hero__bg-content, .photoGrid3A, .photoGrid2A, .photoGrid1A, .hero__bg').each(function() {
            var $container = $(this),
                buImgUrl = $container.find('img').data('src'),
                imgUrl = $container.find('img').prop('src');
            if (imgUrl) {
                if (buImgUrl) {
                    $container.css('backgroundImage', 'url(' + buImgUrl + ')').addClass('compat-object-fit');
                } else {
                    $container.css('backgroundImage', 'url(' + imgUrl + ')').addClass('compat-object-fit');
                }
            }
        });
    }
    var transitionEvent = (function() {
        var t, el = document.createElement('fakeelement');
        var transitions = {
            'transition': 'transitionend',
            'OTransition': 'oTransitionEnd',
            'MozTransition': 'transitionend',
            'WebkitTransition': 'webkitTransitionEnd'
        };
        for (t in transitions) {
            if (el.style[t] !== undefined) {
                return transitions[t];
            }
        }
    })();
    const DATA_ATTR_NAV_OPEN = 'data-nav-open';
    var $nav = $('#nav').on('click', function(e) {
            e.stopPropagation();
        }),
        showNav = function() {
            $nav.attr(DATA_ATTR_NAV_OPEN, 'true');
            $nav.removeClass('inactive');
            $nav.attr('aria-hidden', 'false');
            $('body').addClass('nav-open');
            $nav.addClass('animating').removeClass('nav-done').one(transitionEvent, function() {
                $nav.addClass('nav-done').removeClass('animating');
            });
        },
        hideNav = function() {
            $nav.attr(DATA_ATTR_NAV_OPEN, 'false');
            $nav.addClass('inactive');
            $nav.attr('aria-hidden', 'true');
            $('body').removeClass('nav-open');
            $nav.addClass('animating').removeClass('nav-done').one(transitionEvent, function() {
                $nav.addClass('nav-done').removeClass('animating');
            });
        };
    $('#nav-toggle').on('click', function(e) {
        e.stopPropagation();
        if ($nav.hasClass('inactive')) {
            showNav();
            $(document).on('click', function() {
                hideNav();
            });
        } else {
            hideNav();
        }
    });
    $('#nav-close').on('click', function() {
        hideNav();
    });
    var $sideNav = $('#sidebar-nav');
    $('#sidebar-toggle').on('click', function() {
        var $icon = $(this).find('i.fa');
        if ($sideNav.is('.active')) {
            $icon.removeClass('fa-caret-up').addClass('fa-caret-down');
            $sideNav.removeClass('active');
        } else {
            $icon.removeClass('fa-caret-down').addClass('fa-caret-up');
            $sideNav.addClass('active');
        }
    });
    var navs = document.querySelectorAll('nav ul li.nav__item');
    var dropdowns = [];
    for (var i = 0; i < navs.length; i++) {
        if (navs[i].getElementsByClassName('dropdown').length > 0) {
            dropdowns.push(navs[i]);
        }
    }
    var openDropdown;
    document.addEventListener('touchstart', function() {
        if ($nav.attr(DATA_ATTR_NAV_OPEN) === 'true') return;
        var openDropdowns = document.querySelectorAll('li[data-linkactive="true"]');
        if (openDropdowns.length > 0) {
            for (var i = 0; i < openDropdowns.length; i++) {
                if (!openDropdowns[i].isSameNode(openDropdown)) {
                    openDropdowns[i].dataset.linkactive = 'false';
                }
            }
            openDropdown = null;
        }
    });
    for (let i = 0; i < dropdowns.length; i++) {
        dropdowns[i].addEventListener('touchstart', function(e) {
            if ($nav.attr(DATA_ATTR_NAV_OPEN) === 'true') return;
            if (this.dataset.linkactive !== 'true') {
                e.preventDefault();
                openDropdown = this;
                this.dataset.linkactive = 'true';
            } else {
                e.stopPropagation();
            }
        });
    }
    var $nearbyPropertiesBtn = $('#mobile-nearby-properties');
    if (BREW.mobile || $nearbyPropertiesBtn.hasClass('test')) {
        $nearbyPropertiesBtn.removeClass('hidden');
        $nearbyPropertiesBtn.click(function() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(function(position) {
                    var lat = position.coords.latitude;
                    var lng = position.coords.longitude;
                    window.location.href = '/idx/search.html?near_me=' + lat + ',' + lng;
                }, function() {
                    alert('Please enable access to browser location information to use this feature.');
                });
            } else {
                alert('Location information not available.');
            }
            return false;
        });
    }
    if (window.location.search.includes('near_me')) {
        if (navigator.geolocation) {
            var origlat = 0;
            var origlon = 0;
            var ngl;
            ngl = navigator.geolocation.getCurrentPosition(function(position) {
                origlat = position.coords.latitude;
                origlon = position.coords.longitude;
            }, function() {});
            var intervalngl = setInterval(function() {
                ngl = navigator.geolocation.getCurrentPosition(function(position) {
                    if (getDistanceFromLatLonInKm(position.coords.latitude, position.coords.longitude, origlat, origlon) >= .15) {
                        window.location.href = '/idx/search.html?near_me=' + position.coords.latitude + ',' + position.coords.longitude;
                    }
                }, function() {});
            }, 3000);
        }
    }
    $(window).resize(function() {
        if ($('.interactive-map').length >= 1) {
            $('iframe').each(function() {
                $(this).attr('src', function(i, val) {
                    return val;
                });
            });
        }
    });
    if ($('.interactive-map').length >= 1) {
        $(window).resize();
    }

    function getDistanceFromLatLonInKm(lat1, lon1, lat2, lon2) {
        var R = 6371;
        var dLat = deg2rad(lat2 - lat1);
        var dLon = deg2rad(lon2 - lon1);
        var a = Math.sin(dLat / 2) * Math.sin(dLat / 2) +
            Math.cos(deg2rad(lat1)) * Math.cos(deg2rad(lat2)) * Math.sin(dLon / 2) * Math.sin(dLon / 2);
        var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
        var d = R * c;
        return d;
    }

    function deg2rad(deg) {
        return deg * (Math.PI / 180)
    }
})();

(function() {
    'use strict';
    $('a.popup').on(BREW.events.click, function() {
        var $this = $(this),
            options = $this.data('popup');
        $.Window($.extend(options, {
            iframe: $this.attr('href')
        }));
        return false;
    });
    $('a.external-popup').on(BREW.events.click, function() {
        var $this = $(this),
            options = $this.data('popup');
        $.Window($.extend(options, {
            externalIframe: $this.attr('href')
        }));
        return false;
    });
    $('.action-save[data-save]').on('click', function() {
        var $this = $(this),
            data = $this.data('save');
        $(data.div).Favorite({
            mls: data.mls,
            feed: data.feed,
            onComplete: function(response) {
                if (response.added) {
                    $this.addClass('saved');
                    $this.attr('title', 'Listing Saved');
                }
                if (response.removed) {
                    $this.removeClass('saved');
                    $this.attr('title', 'Save Listing');
                }
            }
        });
        return false;
    });
    $('a[data-menu]').each(function() {
        var $link = $(this),
            $menu = $($link.data('menu'));
        if ($menu.length === 0) return;
        $menu.appendTo('html');
        $(document).on('click.menu', function() {
            $menu.addClass('hidden');
            $link.removeClass('active');
        });
        $(window).on('resize.menu', function() {
            $menu.addClass('hidden');
            $link.removeClass('active');
        });
        $link.on('click', function(e) {
            e.preventDefault();
            if (!$menu.hasClass('hidden')) {
                $('html').removeClass('menu-open');
                $menu.addClass('hidden');
                $link.removeClass('active');
            } else {
                $('html').addClass('menu-open');
                var offset = $link.offset();
                $menu.css({
                    'position': 'absolute',
                    'left': offset.left,
                    'top': offset.top + $link.outerHeight()
                }).removeClass('hidden');
                $link.addClass('active');
            }
            return false;
        });
    });
})();

var Locale = {
    'lang': 'en-CA',
    'spell': function(str) {
        var words = [];
        words['Favorite'] = 'Favourite';
        words['Favorites'] = 'Favourites';
        words['favorite'] = 'favourite';
        words['favorites'] = 'favourites';
        words['Neighbor'] = 'Neighbour';
        words['neighbor'] = 'neighbour';
        words['Neighborhood'] = 'Neighbourhood';
        words['Neighborhoods'] = 'Neighbourhoods';
        words['neighborhood'] = 'neighbourhood';
        words['neighborhoods'] = 'neighbourhoods';
        words['State'] = 'Province';
        words['state'] = 'province';
        words['Zip Code'] = 'Postal Code';
        words['Zip Codes'] = 'Postal Codes';
        words['ZIP CODE'] = 'POSTAL CODE';
        words['ZIP'] = 'Postal Code';
        words['Zip'] = 'Postal Code';
        words['zip'] = 'postal code';
        if (typeof(words[str]) != 'undefined') {
            return words[str];
        } else {
            return str;
        }
    }
};
</script>
<script>
(function($) {
    var event = $.event,
        resizeTimeout;
    event.special['smartresize'] = {
        setup: function() {
            $(this).bind('resize', event.special.smartresize.handler);
        },
        teardown: function() {
            $(this).unbind('resize', event.special.smartresize.handler);
        },
        handler: function(event, execAsap) {
            var context = this,
                args = arguments;
            event.type = 'smartresize';
            if (resizeTimeout) clearTimeout(resizeTimeout);
            resizeTimeout = setTimeout(function() {
                jQuery.event.handle.apply(context, args);
            }, execAsap === 'execAsap' ? 0 : 100);
        }
    };
    $.fn.smartresize = function(fn) {
        return fn ? this.bind('smartresize', fn) : this.trigger('smartresize', ['execAsap']);
    };
})(jQuery);
(function() {
    jQuery.fn.eqHeight = function() {
        return this.each(function() {
            var tallest = 0;
            var $cols = $(this).children().css('min-height', 0);
            $cols.each(function() {
                var height = $(this).outerHeight();
                if (height > tallest) tallest = height;
            });
            $cols.css('min-height', tallest + 2);
        });
    };
})();
(function($) {
    $.fn.touchwipe = function(settings) {
        var config = {
            min_move_x: 20,
            min_move_y: 20,
            wipeLeft: function() {},
            wipeRight: function() {},
            wipeUp: function() {},
            wipeDown: function() {},
            preventDefaultEvents: true
        };
        if (settings) $.extend(config, settings);
        this.each(function() {
            var startX;
            var startY;
            var isMoving = false;

            function cancelTouch() {
                this.removeEventListener('touchmove', onTouchMove);
                startX = null;
                isMoving = false;
            }

            function onTouchMove(e) {
                if (config.preventDefaultEvents) {
                    e.preventDefault();
                }
                if (isMoving) {
                    var x = e.touches[0].pageX;
                    var y = e.touches[0].pageY;
                    var dx = startX - x;
                    var dy = startY - y;
                    if (Math.abs(dx) >= config.min_move_x) {
                        cancelTouch();
                        if (dx > 0) {
                            config.wipeLeft(e);
                        } else {
                            config.wipeRight(e);
                        }
                    } else if (Math.abs(dy) >= config.min_move_y) {
                        cancelTouch();
                        if (dy > 0) {
                            config.wipeDown(e);
                        } else {
                            config.wipeUp(e);
                        }
                    }
                }
            }

            function onTouchStart(e) {
                if (e.touches.length == 1) {
                    startX = e.touches[0].pageX;
                    startY = e.touches[0].pageY;
                    isMoving = true;
                    this.addEventListener('touchmove', onTouchMove, false);
                }
            }
            if ('ontouchstart' in document.documentElement) {
                this.addEventListener('touchstart', onTouchStart, false);
            }
        });
        return this;
    };
})(jQuery);

(function(BREW, $, window, document, undefined) {
    'use strict';
    BREW.Window = function(el, options) {
        var self = this,
            $el = $(el);
        options = $.extend({
            ajax: null,
            iframe: null,
            header: true,
            title: null,
            content: null,
            open: true,
            overlay: true,
            closeOnEscape: true,
            closeOnClick: false,
            stack: false,
            onOpen: null,
            onClose: null,
            closeBtn: true,
            width: 'auto',
            height: 'auto',
            noClose: false
        }, BREW.Window.UI, options);
        var $overlay = $('<div class="overlay" />');
        self.init = function() {
            $el.addClass('init');
            if (options.width) $el.css('width', options.width);
            if (options.height) $el.css('height', options.height).find('.' + BREW.Window.UI.paneClass).css('max-height', options.height);
            if (options.stack) $el.addClass('stacked');
            $el.appendTo('body');
            if (options.open) self.open();
            self.bindEvents();
        };
        self.getWindow = function() {
            return $el;
        };
        self.addOverlay = function() {
            $overlay.appendTo(document.body).show();
            $('body').on('touchmove.window', function(e) {
                var $t = $(e.target);
                if ($t.closest('.' + BREW.Window.UI.paneClass).length > 0) {
                    return true;
                }
                e.preventDefault();
            });
        };
        self.removeOverlay = function() {
            $overlay.remove();
            $('body').off('touchmove.window');
        };
        self.hideOverlay = function() {
            $overlay.hide();
        };
        self.getTitle = function() {
            return $el.find('header').find('.' + BREW.Window.UI.titleClass).html();
        };
        self.getContents = function() {
            return $el.find('.' + BREW.Window.UI.paneClass).html();
        };
        self.setTitle = function(title) {
            $el.find('header').find('.' + BREW.Window.UI.titleClass).html(title);
        };
        self.setContents = function(contents) {
            $el.find('.' + BREW.Window.UI.paneClass).html(contents);
        };
        self.position = function() {
            var iFrame = false;
            if (options.iframe) {
                var $iframe = $el.find('iframe');
                if ($iframe.length > 0) {
                    $iframe.trigger('adjustHeight');
                    iFrame = true;
                }
            }
            var maxHeight = $(window).height();
            var origHeight = $el.outerHeight();
            var height = maxHeight > 0 && origHeight > maxHeight ? maxHeight : origHeight;
            if (!iFrame) {
                var $header = $el.find('header'),
                    headerh = $header.length === 1 ? $header.outerHeight() : 0,
                    actualh = $el.height(),
                    paneh = actualh < maxHeight ? actualh - headerh : maxHeight - headerh;
                $el.find('.' + BREW.Window.UI.paneClass).css('max-height', paneh);
            }
            if ($el.hasClass('positioned')) {
                $el.animate({
                    'margin-top': -(height !== false ? height / 2 : $el.outerHeight() / 2) + 'px',
                    'margin-left': -($el.outerWidth() / 2) + 'px'
                }, 'fast');
            } else {
                $el.css({
                    'margin-top': -(height !== false ? height / 2 : $el.outerHeight() / 2) + 'px',
                    'margin-left': -($el.outerWidth() / 2) + 'px'
                }).addClass('positioned');
            }
        };
        self.open = function() {
            if ($el.hasClass('closed')) {
                $('.window.init:not(.stacked)').not($el).Window('close');
                self.position();
                $el.removeClass('closed');
                $('body').addClass('mute');
                if (options.overlay) self.addOverlay();
                if (options.onOpen) options.onOpen(this);
                $('html, body').scrollTop(0);
            }
        };
        self.close = function() {
            $('body').removeClass('mute');
            if (options.iframe || options.ajax || options.content) $el.remove();
            if (options.overlay) self.removeOverlay();
            if (options.onClose) options.onClose(this);
        };
        self.hide = function() {
            $el.addClass('closed').hide();
            $('body').removeClass('mute');
            if (options.overlay) self.hideOverlay();
            if (options.onClose) options.onClose(this);
        };
        self.bindEvents = function() {
            window.setTimeout(function() {
                $(document).on(BREW.events.click + '.window', function(e) {
                    var $t = $(e.target).closest('.window');
                    if ($t.get(0) != el && options.closeOnClick) {
                        $(document).off(BREW.events.click + '.window');
                        self.close();
                    }
                });
            }, 2000);
            $(document).on('keyup.window', function(e) {
                options.closeOnEscape && e.which == 27 && self.close();
            });
            if (options.closeBtn) {
                $el.on(BREW.events.click + '.window', 'header .' + BREW.Window.UI.buttonSetClass, function(e) {
                    e.preventDefault();
                    self.close();
                });
            }
            $(window).bind('smartresize.window', self.position);
        };
        self.init();
    };
    $.Window = $.fn.Window = function(options) {
        $.extend(options, BREW.Window.UI);
        var ns = 'BREW.Window';
        if (options.noClose) {
            options = $.extend({
                closeBtn: false,
                closeOnClick: false,
                closeOnEscape: false
            }, options);
        }
        var methods = {
            setTitle: function(title) {
                this.setTitle(title);
            },
            addOverlay: function() {
                this.addOverlay();
            },
            removeOverlay: function() {
                this.removeOverlay();
            },
            position: function() {
                this.position();
            },
            open: function() {
                this.open();
            },
            close: function() {
                this.close();
            },
            hide: function() {
                this.hide();
            }
        };
        var createWindow = function(opts) {
            var windowClass = opts.windowClass + ' closed';
            if (opts.iframe) windowClass += ' iframe';
            var headerClass = opts.headerClass;
            var titleClass = opts.titleClass;
            var paneClass = opts.paneClass;
            var content = opts.content || '';
            var titleText = opts.title || (opts.ajax || opts.iframe ? 'Loading&hellip;' : '&nbsp;');
            var buttonSetClass = opts.buttonSetClass;
            var closeButtonHtml = opts.closeButtonHtml;
            return $('<div class="' + windowClass + '">' +
                '<header class="' + headerClass + '">' +
                '<h4 class="' + titleClass + '">' + titleText + '</h4>' +
                (opts.closeBtn !== false ? '<div class="' + buttonSetClass + '">' + closeButtonHtml + '</div>' : '') +
                '</header>' +
                '<div class="' + paneClass + '"' + (options.externalIframe ? ' style="padding:0;"' : '') + '>' + content + '</div>' +
                '</div>');
        };
        if (!(this instanceof $) && typeof(options) != 'string') {
            if (options.ajax) {
                $.ajax({
                    url: options.ajax,
                    type: 'get',
                    dataType: 'html',
                    success: function(data) {
                        var $html = $(data);
                        var title = $html.filter('.' + BREW.Window.UI.titleClass).text();
                        var html = $html.find('#content').html();
                        options.title = title;
                        options.content = html;
                        var $el = createWindow(options);
                        return $el.Window(options);
                    }
                });
            } else if (options.iframe) {
                options.iframe = (options.iframe.indexOf('?') != -1 ? options.iframe + '&' : options.iframe + '?') + 'popup';
                options = $.extend(options, {
                    width: 800,
                    open: false,
                    content: '<iframe src="' + options.iframe + '" width="100%" frameborder="0"></iframe>'
                }), $el = createWindow(options);
                $el.find('iframe').on('load', function() {
                    var doc = this.contentWindow.document,
                        docTitle = doc.title,
                        $body = $('body', doc);
                    $el.Window('open');
                    window.setTimeout(function() {
                        $el.Window('setTitle', docTitle);
                        $el.Window('position');
                        $body.find('a').each(function() {
                            var $this = $(this),
                                href = $this.attr('href'),
                                target = $this.attr('target');
                            if (target != '_blank' && target != '_parent' && href && href.length > 0 && href.indexOf('javascript:') !== 0 && href.indexOf('#') !== 0) {
                                $this.attr('href', (href.indexOf('?') != -1 ? href + '&' : href + '?') + 'popup');
                            }
                        });
                        $body.find('form').each(function() {
                            var $this = $(this),
                                action = $this.attr('action');
                            if (action && action.length > 0) {
                                $this.attr('action', (action.indexOf('?') != -1 ? action + '&' : action + '?') + 'popup');
                            }
                            $this.on('submit', function() {
                                return true;
                            });
                        });
                    }, 2000);
                }).on('adjustHeight', function() {
                    var doc = this.contentWindow.document,
                        $body = $('body', doc),
                        height = $body.height(),
                        headerh = $el.find('header').outerHeight(),
                        wh = $(window).height(),
                        bodyh = 0,
                        popuph = 0;
                    wh = (wh < 50) ? wh : (wh - 50);
                    if ((height + headerh) < wh) {
                        bodyh = height;
                        popuph = height + headerh;
                    } else {
                        bodyh = wh - headerh;
                        popuph = wh;
                    }
                    $(this).height(bodyh);
                    $body.height(bodyh);
                    $el.height(popuph);
                });
                var $window = $el.Window(options);
                $window.Window('addOverlay');
                $('body').addClass('mute');
                $('html, body').scrollTop(0);
                return $window;
            } else if (options.externalIframe) {
                var width = $(window).width();
                var height = $(window).height();
                width = Math.floor(0.66 * width);
                options = $.extend(options, {
                    height: height,
                    width: width,
                    open: false,
                    content: '<iframe src="' + options.externalIframe + '" width="' + width + '" height="' + (height - 60) + '" frameborder="0"></iframe>'
                }), $el = createWindow(options);
                var $window = $el.Window(options);
                $window.Window('addOverlay');
                $('body').addClass('mute');
                $el.Window('position');
                return $window;
            } else {
                var $el = createWindow(options);
                return $el.Window(options);
            }
        }
        if (typeof(options) == 'string' && methods[options]) {
            if (!(this instanceof $)) {
                $('.window.init').each(function() {
                    var win = $(this).data(ns);
                    if (win) methods[options].apply(win, Array.prototype.slice.call(arguments, 1));
                });
                return;
            }
            var win = $(this).data(ns);
            if (win) return methods[options].apply(win, Array.prototype.slice.call(arguments, 1));
        } else if (typeof options === 'object' || !options) {
            return this.each(function() {
                var $this = $(this);
                if (undefined == $this.data(ns)) {
                    var plugin = new BREW.Window(this, options);
                    $this.data(ns, plugin);
                }
            });
        }
    };
    BREW.Window.UI = {
        windowClass: 'window',
        headerClass: 'header',
        titleClass: 'title',
        paneClass: 'pane',
        buttonSetClass: 'btnset',
        closeButtonHtml: '<a class="close btn"><i class="icon-remove"></i></a>',
    };
}).apply({}, [BREW, jQuery, window, document]);

BREW.Window.UI = {
    windowClass: 'window',
    headerClass: 'window__head',
    titleClass: 'window__title',
    paneClass: 'window__pane',
    buttonSetClass: 'buttons',
    closeButtonHtml: '<a class="close">' + '<svg class="icon icon--xs">' + '<use xlink:href="/inc/skins/ce/img/assets.svg#icon--close" />' + '</svg>' + '</a>'
};
</script>
<script src="https://www.calgary-real-estate.com/inc/cache/js/modules.e0e0e78f51bcb7c7ac7035e0ab1017a3.4.0.js"></script>

<!--[if (gte IE 6)&(lte IE 8)]><script src="https://www.calgary-real-estate.com/inc/skins/brew/js/selectivizr-min.js"></script><![endif]-->
</body>

</html>